## ----imp-coerce2-echo, eval = FALSE---------------------------------------------------------------
## c(1.25, TRUE, 4L)
## 
## c(1L, FALSE)
## 
## c(7L, 6.23, "eight")
## 
## c(TRUE, 1L, 0L, "False")


## ----imp-coerce2-eval-----------------------------------------------------------------------------
typeof(c(1.25, TRUE, 4L))
typeof(c(1L, FALSE))
typeof(c(7L, 6.23, "eight"))
typeof(c(TRUE, 1L, 0L, "False"))


## ----attributes-iris------------------------------------------------------------------------------
attributes(iris)


## ----iris-head------------------------------------------------------------------------------------
head(iris)


## ----iris-class-----------------------------------------------------------------------------------
attr(iris, "class")
attr(iris, "names")


## ----attr-species---------------------------------------------------------------------------------
attributes(iris$Species)
attributes(iris$Sepal.Length)


## ----attr-redefine--------------------------------------------------------------------------------
attr(iris$Species, "levels") <- c("Red", "Green", "Blue")

head(iris)


## ----mat1-----------------------------------------------------------------------------------------
m <- matrix(1:6, ncol = 2)
m


## ----mat1-attributes------------------------------------------------------------------------------
attributes(m)


## ----mat1-modify-attr-----------------------------------------------------------------------------
attr(m, "dim") <- c(2, 3)
m


## ----v-to-m---------------------------------------------------------------------------------------
v <- 1:6
v
attr(v, "dim") <- c(3, 2)
v


## ----by-row1--------------------------------------------------------------------------------------
matrix(6:13, 
       ncol = 2, 
       byrow = TRUE) #<<
vect <- 6:13
dim(vect) <- c(2, 4)
vect


## ----by-row2--------------------------------------------------------------------------------------
t(vect)


## ----dimnames1------------------------------------------------------------------------------------
attr(v, "dimnames") <- list(c("the first", "second", "III"),
                            c("index", "value"))
v


## ----dimnames2------------------------------------------------------------------------------------
v2 <- 1:6
attr(v2, "dim") <- c(3, 2)
rownames(v2) <- c("the first", "second", "III")
colnames(v2) <- c("index", "value")
v2


## -------------------------------------------------------------------------------------------------
attr(v, "matrix_mean") <- mean(v)
v
attr(v, "matrix_mean")


## ----stripped1------------------------------------------------------------------------------------
v
rowSums(v)


## ----stripped2------------------------------------------------------------------------------------
attributes(rowSums(v))



## ----names1---------------------------------------------------------------------------------------
names(v)
names(v) <- letters[1:6]
v


## ----names2---------------------------------------------------------------------------------------
v3a <- c(a = 5, b = 7, c = 12)
v3a
names(v3a)
attributes(v3a)


## ----names3---------------------------------------------------------------------------------------
v3b <- c(5, 7, 12)
names(v3b) <- c("a", "b", "c")
v3b

v3c <- setNames(c(5, 7, 12), c("a", "b", "c"))
v3c


## ----factor---------------------------------------------------------------------------------------
fct <- factor(c("a", "a", "b", "c"))
typeof(fct)
attributes(fct)
str(fct)


## ----dates----------------------------------------------------------------------------------------
date <- Sys.Date()
typeof(date)
attributes(date)
attributes(date) <- NULL
date


## ----missing1-------------------------------------------------------------------------------------
NA > 5
NA * 7


## ----missing2, eval = FALSE-----------------------------------------------------------------------
## NA == NA


## ----missing2-eval, echo = FALSE------------------------------------------------------------------
NA == NA


## ----missing-non-propagation----------------------------------------------------------------------
NA | TRUE
x <- c(NA, 3, NA, 5)
any(x > 4)


## ----missing3-------------------------------------------------------------------------------------
x == NA


## ----missing4-------------------------------------------------------------------------------------
is.na(x)


## ----list1----------------------------------------------------------------------------------------
list("a", 7L, 3.25, TRUE)


## ----list2----------------------------------------------------------------------------------------
l <- list(c("a", "b", "c"),
     rnorm(5), 
     c(7L, 2L),
     c(TRUE, TRUE, FALSE, TRUE))
l


## ----list-attr------------------------------------------------------------------------------------
typeof(l)
attributes(l)
str(l)


## ----list-df1-------------------------------------------------------------------------------------
l_df <- list(a = c("red", "blue"),
             b = rnorm(2),
             c = c(7L, 2L),
             d = c(TRUE, FALSE))
l_df


## ----list-df2-------------------------------------------------------------------------------------
data.frame(l_df)


## ----subset1--------------------------------------------------------------------------------------
x <- c(a = 3, b = 5, c = 7)

l <- list(x = x, 
          x2 = c(x, x), 
          x3 = list(vect = x,
                    squared = x^2,
                    cubed = x^3))


## ----subset2-left---------------------------------------------------------------------------------
x["a"]
x[1]


## ----subset2-right--------------------------------------------------------------------------------
x[c(TRUE, FALSE, FALSE)]
x[-c(2, 3)]


## ----subset3--------------------------------------------------------------------------------------
fct
fct["b"]
fct[3]
fct[factor("b")]


## ----subset-lists-left----------------------------------------------------------------------------
l[1]
typeof(l[1])

l[[1]]


## ----subset-lists-right---------------------------------------------------------------------------
typeof(l[[1]])

l[[1]]["c"]


## ----dollar-subset--------------------------------------------------------------------------------
l$x2
l$x3


## ----dollar-subset-nested-------------------------------------------------------------------------
l$x3$squared


## ----dollar-subset-error, error = TRUE------------------------------------------------------------
l$x3$squared$b


## ----dollar-subset-success------------------------------------------------------------------------
l$x3$squared["b"]


## ----alternative-subset-list1---------------------------------------------------------------------
l[c(TRUE, FALSE, TRUE)]


## ----alternative-subset-list2---------------------------------------------------------------------
l[c(1, 3)]


## ----bracket-fail, error = TRUE-------------------------------------------------------------------
l[[c(TRUE, FALSE, FALSE)]]


## ----head-mtcars----------------------------------------------------------------------------------
head(mtcars)
mtcars[3, 4]


## ----mtcars-col4----------------------------------------------------------------------------------
mtcars[ ,4]


## ----mtcars-row4----------------------------------------------------------------------------------
mtcars[4, ]


## ----mtcars-row4-mpg1-----------------------------------------------------------------------------
mtcars[4, c("mpg", "hp")]


## ----mtcars-row4-mpg2-----------------------------------------------------------------------------
mtcars[4, ][c("mpg", "hp")]


## ----drop-false-----------------------------------------------------------------------------------
mtcars[ ,4]
mtcars[ ,4, drop = FALSE]


## ----tibble-nodrop-att----------------------------------------------------------------------------
mtcars_tbl <- tibble::as_tibble(mtcars)
mtcars_tbl[ ,4]


## ----tibble-drop-att------------------------------------------------------------------------------
mtcars_tbl[ ,4, drop = TRUE]


## ----array----------------------------------------------------------------------------------------
array <- 1:12
dim(array) <- c(2, 3, 2)
array


## ----array-select-mat-----------------------------------------------------------------------------
array[ , ,2]


## ----array-select-col-----------------------------------------------------------------------------
array[ ,1, ]


## ----lm1------------------------------------------------------------------------------------------
m <- lm(mpg ~ hp, mtcars)
str(m)

